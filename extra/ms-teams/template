# Template untuk teams-for-linux (MS Teams Unofficial)
pkgname=ms-teams
version=2.7.3
revision=1
wrksrc="teams-for-linux-${version}"
build_style=fetch
hostmakedepends="nodejs npm git"
depends="electron"
short_desc="Unofficial Microsoft Teams client (Electron wrapper)"
maintainer="Gh0sT4n <luthgeog@email.com>"
license="GPL-3.0-or-later"
homepage="https://github.com/IsmaelMartinez/teams-for-linux"
distfiles="https://github.com/IsmaelMartinez/teams-for-linux/archive/refs/tags/v${version}.tar.gz"
checksum=SKIP

do_build() {
    npm install
    npx electron-builder --linux dir
}

do_install() {
    vmkdir usr/lib/${pkgname}
    cp -r dist/linux*/* ${DESTDIR}/usr/lib/${pkgname}

    vmkdir usr/bin
    ln -s /usr/lib/${pkgname}/teams-for-linux ${DESTDIR}/usr/bin/ms-teams-unofficial

    vmkdir usr/share/applications
    vinstall appimage/teams-for-linux.desktop 644 usr/share/applications

    vmkdir usr/share/pixmaps
    vinstall appimage/teams-for-linux.png 644 usr/share/pixmaps
}
